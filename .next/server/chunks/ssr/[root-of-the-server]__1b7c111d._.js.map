{"version":3,"sources":["../../../../src/app/internal/pdf-debug/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { generatePDFByTemplate } from \"@/lib/pdfTemplates\";\n\n\nconst templates = [\n    { id: \"classic\", style: \"classic\" },\n    { id: \"modern\", style: \"modern\" },\n    { id: \"creative\", style: \"creative\" },\n    { id: \"executive\", style: \"executive\" },\n    { id: \"tech\", style: \"tech\" },\n    { id: \"academic\", style: \"academic\" },\n    { id: \"twoColumn\", style: \"twoColumn\" },\n    { id: \"timeline\", style: \"timeline\" },\n    { id: \"infographic\", style: \"infographic\" },\n    { id: \"elegant\", style: \"elegant\" },\n    { id: \"cool2025\", style: \"cool2025\" },\n];\n\nconst dummyData = {\n    formData: {\n        fullName: \"John Doe\",\n        email: \"john.doe@example.com\",\n        phone: \"+1 234 567 890\",\n        address: \"New York, USA\",\n        linkedin: \"linkedin.com/in/johndoe\",\n        github: \"github.com/johndoe\",\n        professionalTitle: \"Senior Software Engineer\",\n        summary: \"Experienced software engineer with a passion for building scalable web applications. Proven track record of delivering high-quality code and leading teams.\",\n        skills: \"JavaScript, TypeScript, React, Node.js, Python, SQL, AWS, Docker\",\n        certifications: \"AWS Certified Solutions Architect\\nMeta Frontend Developer Professional Certificate\",\n        photo: \"\" // No photo for consistent testing\n    },\n    workExperiences: [\n        {\n            jobTitle: \"Senior Developer\",\n            company: \"Tech Solutions Inc.\",\n            startDate: \"2020\",\n            endDate: \"Present\",\n            description: \"• Led a team of 5 developers\\n• Architected microservices\"\n        },\n        {\n            jobTitle: \"Web Developer\",\n            company: \"StartUp Co\",\n            startDate: \"2018\",\n            endDate: \"2020\",\n            description: \"• Built main product dashboard\\n• Optimized performance\"\n        }\n    ],\n    education: [\n        {\n            degree: \"BS Computer Science\",\n            institution: \"Tech University\",\n            year: \"2018\",\n            description: \"Graduated with Honors\"\n        }\n    ],\n    references: [\n        {\n            name: \"Jane Smith\",\n            contact: \"Manager, Tech Solutions\"\n        }\n    ],\n    sectionOrder: [\n        { type: \"workExperience\" },\n        { type: \"education\" },\n        { type: \"skills\" },\n        { type: \"certifications\" },\n        { type: \"references\" }\n    ]\n};\n\nexport default function PdfDebugPage() {\n    const [status, setStatus] = useState<Record<string, string>>({});\n\n    useEffect(() => {\n        const renderAll = async () => {\n            const pdfjsLib = await import(\"pdfjs-dist\");\n            pdfjsLib.GlobalWorkerOptions.workerSrc = \"/pdf.worker.min.mjs\";\n\n            for (const template of templates) {\n                try {\n                    setStatus(prev => ({ ...prev, [template.id]: \"Generating...\" }));\n\n                    // 1. Generate PDF\n                    // @ts-ignore\n                    const doc = generatePDFByTemplate(template.style, dummyData.formData, dummyData.workExperiences, dummyData.education, dummyData.references, dummyData.sectionOrder);\n                    const pdfBlob = doc.output(\"blob\");\n                    const pdfUrl = URL.createObjectURL(pdfBlob);\n\n                    // 2. Render to Canvas\n                    const loadingTask = pdfjsLib.getDocument(pdfUrl);\n                    const pdf = await loadingTask.promise;\n                    const page = await pdf.getPage(1);\n\n                    const scale = 1.5;\n                    const viewport = page.getViewport({ scale });\n\n                    const canvas = document.getElementById(`canvas-${template.id}`) as HTMLCanvasElement;\n                    if (canvas) {\n                        const context = canvas.getContext(\"2d\");\n                        canvas.height = viewport.height;\n                        canvas.width = viewport.width;\n\n                        const renderContext = {\n                            canvasContext: context!,\n                            viewport: viewport,\n                        };\n                        // @ts-ignore\n                        await page.render(renderContext).promise;\n                        setStatus(prev => ({ ...prev, [template.id]: \"Done\" }));\n                    }\n                } catch (e: any) {\n                    console.error(`Error rendering ${template.id}:`, e);\n                    setStatus(prev => ({ ...prev, [template.id]: `Error: ${e.message}` }));\n                }\n            }\n        };\n\n        renderAll();\n    }, []);\n\n    return (\n        <div className=\"p-8 bg-slate-100 min-h-screen\">\n            <h1 className=\"text-2xl font-bold mb-6\">PDF Rendering Debug</h1>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n                {templates.map(t => (\n                    <div key={t.id} className=\"bg-white p-4 rounded shadow\">\n                        <h3 className=\"font-bold mb-2 capitalize\">{t.id}</h3>\n                        <div className=\"text-sm text-slate-500 mb-2\">Status: {status[t.id] || \"Waiting...\"}</div>\n                        <div className=\"border border-slate-200 overflow-hidden\">\n                            <canvas id={`canvas-${t.id}`} className=\"w-full h-auto\" />\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}